
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JSTwitter - Jumpstart Lab Curriculum</title>
  <meta name="author" content="Jumpstart Lab">

  
  <meta name="description" content="            JSTwitter          In this multi-phase project, you will build a client that interacts with the Twitter messaging service.  Your client...">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://yoursite.com/projects/jstwitter.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection, print" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Jumpstart Lab Curriculum" type="application/atom+xml">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"></script>
  <script src="http://tab-slide-out.googlecode.com/files/jquery.tabSlideOut.v1.3.js"></script>

  <script type="text/javascript">
    $(function(){
      $('.slide-out-div').tabSlideOut({
        tabHandle: '.handle',                     //class of the element that will become your tab
        pathToTabImage: '/images/feedback_tab.png', //path to the image for the tab //Optionally can be set using css
        imageHeight: '150px',                     //height of tab image           //Optionally can be set using css
        imageWidth: '50px',                       //width of tab image            //Optionally can be set using css
        tabLocation: 'left',                      //side of screen where tab lives, top, right, bottom, or left
        speed: 300,                               //speed of animation
        action: 'click',                          //options: 'click' or 'hover', action to trigger animation
        topPos: '200px',                          //position from the top/ use if tabLocation is left or right
        leftPos: '20px',                          //position from left/ use if tabLocation is bottom or top
        fixedPosition: true                      //options: true makes it stick(fixed position) on scroll
        });
      });
  </script>

  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

</head>

<body  >
  <header role="banner"><hgroup>
  <h1><a href="/">Jumpstart Lab Curriculum</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:yoursite.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul class="main-navigation">
  <li><a href="/">Curriculum Index</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    
    <h1 class="entry-title">JSTwitter</h1>
    
  </header>
  
  <p>In this multi-phase project, you will build a client that interacts with the Twitter messaging service.  Your client will both mimic functionality found through the twitter.com web interface as well as perform many new tasks.</p>

<p>Learning Goals:</p>

<ul>
<li>Practice installing and using a gem library</li>
<li>Writing methods and basic instructions</li>
<li>Practice basic techniques including conditional branching and looping</li>
</ul>

<div class="note">
<p>The Twitter gem has changed out from under us for about the 82nd time. This tutorial needs revision which will happen before 3/12. Sorry if things get confusing.</p>
<p>In particular, I believe there are issues with how the gem now handles the pagination of tweets and followers/friends which may not be dealt with in the tutorial.</p>
</div>

<div class="note">
<p>This tutorial is open source. If you notice errors, typos, or have questions/suggestions, please <a href="https://github.com/JumpstartLab/curriculum/blob/master/source/projects/jstwitter.markdown">submit them to the project on Github</a>.</p>
</div>

<h2>Iteration 0: Up &amp; Running</h2>

<p>If you haven&#8217;t already setup Ruby, visit <a href="/topics/environment/environment.html">the environment setup page for instructions</a>.</p>

<p>Install the <code>jumpstart_auth</code> gem like this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install jumpstart_auth</span></code></pre></td></tr></table></div></figure>

<p>Next open RubyMine and&#8230;
* Click &quot;Create a New Project&quot;
** Project name: JSTwitter
** Project type: Empty Project
** Click OK
* Right click on the project folder (in the left pane) and select NEW -&gt; FILE
** Enter the class name: JSTwitter</p>

<p>Start off your program with this structure:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;rubygems&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;jumpstart_auth&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">JSTwitter</span>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:client</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Initializing&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>Then, with an IRB session that was started in your project&#8217;s working directory, do the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="nb">require</span> <span class="s1">&#39;jstwitter&#39;</span>
</span><span class='line'>  <span class="n">jst</span> <span class="o">=</span> <span class="no">JSTwitter</span><span class="o">.</span><span class="n">new</span>
</span></code></pre></td></tr></table></div></figure>

<p>Once you execute the second line you should see output like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">Initializing</span>
</span><span class='line'> <span class="o">=&gt;</span> <span class="c1">#&lt;JSTwitter:0x1014012b0&gt;</span>
</span></code></pre></td></tr></table></div></figure>

<h3>Dealing with OAuth</h3>

<p>Recently Twitter disabled the &quot;basic&quot; authentication.  It was much easier than the OAuth system they use now, but they&#8217;re forcing us to update. The OAuth authentication system is a more complex private/public key exchange and will require a few extra steps.  I wrapped up all the complexity into the <code>jumpstart_auth</code> gem so it&#8217;ll look easy to you!  You just need to use my library inside your initialize method&#8230;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Initializing...&quot;</span>
</span><span class='line'>    <span class="vi">@client</span> <span class="o">=</span> <span class="no">JumpstartAuth</span><span class="o">.</span><span class="n">twitter</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>  

<p>To run this code, start up IRB and enter the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="nb">require</span> <span class="s1">&#39;jstwitter&#39;</span>
</span><span class='line'>  <span class="n">jst</span> <span class="o">=</span> <span class="no">JSTwitter</span><span class="o">.</span><span class="n">new</span>
</span></code></pre></td></tr></table></div></figure>

<p>The first time this is run it&#8217;ll use the Launchy gem to pop open your web browser and ask for permission to use your account.  Each of you should use a different test account with these credentials:</p>

<ul>
<li><em>Username:</em> jsl<em>demo</em>XX  (where X is your number)</li>
<li><em>Password:</em> jsl<em>demo</em>pw </li>
</ul>

<p>Twitter will then give you a pin number that&#8217;s about 10 digits.  Copy it to your clipboard, go over to your IRB session, and paste it in where the prompt says <code>Enter the supplied pin:</code>.</p>

<p>The result is that we have a <code>@client</code> variable which is our connection to Twitter.  With that setup, we can move forward.</p>

<h2>Iteration 1: Posting Tweets</h2>

<p>Posting tweets is easy now that we have the <code>@client</code> object, but we need to know what methods are available from the library.  This library is not very well documented.  The best information is available on the GitHub project readme file here: &quot;<a href="https://github.com/jnunemaker/twitter":https://github.com/jnunemaker/twitter">https://github.com/jnunemaker/twitter&quot;:https://github.com/jnunemaker/twitter</a></p>

<p>In the readme you&#8217;ll find a section &quot;Usage Examples&quot; which clues you into some of the functions exposed by the library.</p>

<h4>Step 1 - Write the <code>tweet</code> Method</h4>

<p>Now add the the following method to your class:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">tweet</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'>   <span class="vi">@client</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>Then at the very end of the file, add these lines:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">jst</span> <span class="o">=</span> <span class="no">JSTwitter</span><span class="o">.</span><span class="n">new</span>
</span><span class='line'><span class="n">jst</span><span class="o">.</span><span class="n">tweet</span><span class="p">(</span><span class="s2">&quot;JS Twitter Initialized&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>Then run your code by going to your terminal/command-prompt an entering:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="n">ruby</span> <span class="n">jstwitter</span><span class="o">.</span><span class="n">rb</span>
</span></code></pre></td></tr></table></div></figure>

<p>You should see the output say <code>Initializing</code>.  Now go to &quot;<a href="http://twitter.com/your_testing_account_username":http://twitter.com/your_testing_account_username">http://twitter.com/your_testing_account_username&quot;:http://twitter.com/your_testing_account_username</a> and look for your 
results!</p>

<h4>Step 2 - Length Restrictions</h4>

<p>Twitter messages are limited to 140 characters.  Experiment with your current program and see what happens if your try to call <code>tweet</code> with a message longer than 140.  Let&#8217;s create some error checking that will prevent the user from posting messages longer than 140.</p>

<p>Inside your <code>tweet</code> method, write an <code>if</code>/<code>else</code> block that performs the following logic:</p>

<ul>
<li>If the message to tweet is less than or equal to 140 characters long, tweet it.</li>
<li>Otherwise, print out a warning message and do not post the tweet.</li>
</ul>

<p>Test your new <code>tweet</code> method with a message that is less than 140 characters, one that is exactly 140 characters, and one that&#8217;s longer than 140 characters.</p>

<p>How do you get a string that&#8217;s exactly 140 characters?  Here&#8217;s how I did it in <code>irb</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="k">until</span> <span class="n">text</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">140</span>
</span><span class='line'>  <span class="n">text</span> <span class="o">=</span> <span class="n">text</span> <span class="o">+</span> <span class="s2">&quot;asdf&quot;</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="nb">puts</span> <span class="n">text</span>
</span></code></pre></td></tr></table></div></figure>

<h2>Iteration 2: A Better Interface</h2>

<p>Our client is off to a good start, but the interface sucks.  We have to change lines in the Ruby file for each tweet we want to send &#8211; that&#8217;s not reasonable!</p>

<p>Let&#8217;s build a simple prompt/command interface to run our program.</p>

<h4>Step 0 - Outline the Process</h4>

<p>First, let&#8217;s define a method named <code>run</code> which will be the instruction that gets repeated over and over:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">def</span> <span class="nf">run</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Welcome to the JSL Twitter Client!&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>Then go to the last line of your program and change it to <code>jst.run</code>.</p>

<p>Run your program at the command line with <code>ruby js_twitter.rb</code> and you should just see the line &quot;Welcome to the JSL Twitter Client!&quot;</p>

<h4>Step 1 - The Loop</h4>

<p>Underneath the <code>puts</code> line we&#8217;ll use a <code>while</code> loop to repeat instructions over and over.  Add these lines below the <code>puts</code> but before the <code>end</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>  <span class="k">while</span> <span class="n">command</span> <span class="o">!=</span> <span class="s2">&quot;q&quot;</span>
</span><span class='line'>    <span class="nb">printf</span> <span class="s2">&quot;enter command: &quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>Now before you run that, remember that you can exit a running Ruby application by pressing <em>Control-C</em>.  </p>

<p>Go ahead an run that program and you should see an infinite repetition of the &quot;enter command: &quot; string.  The <code>while</code> loop will keep repeating until the variable <code>command</code> contains the value <code>&quot;q&quot;</code>.  Since we set <code>command</code> to the empty string and aren&#8217;t changing it, the loop continues forever.</p>

<p>Also, you might wonder what <code>printf</code> is about.  Why not <code>puts</code>?  The difference is that <code>printf</code> prints text and leaves the cursor there, while <code>puts</code> prints text then starts a new line.  For our interface, we&#8217;ll have the prompt and the command on the same line.</p>

<h4>Step 2 - Accepting Input</h4>

<p>In Ruby we can accept user string with the <code>gets</code> command.  Add this line below your <code>printf</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="n">command</span> <span class="o">=</span> <span class="nb">gets</span>
</span></code></pre></td></tr></table></div></figure>

<p>Now run your program again and it&#8217;ll wait for you to enter commands.  Try typing some things in.  Try entering a <code>q</code> to quit.</p>

<p>It doesn&#8217;t work, right?  There&#8217;s a little gotcha with using <code>gets</code> &#8211; it picks up the enter key too.  So your <code>command</code> variable is actually getting the string <code>&quot;q\n&quot;</code> where that backslash-n is a new line.  The fix is to change <code>gets</code> to <code>gets.chomp</code>.  The <code>chomp</code> method will remove any whitespace (spaces, tabs, newlines) on either the front or back ends of a string.</p>

<p>After you add the <code>chomp</code> try your program again and you should be able to quit with just <code>q</code>.</p>

<h4>Step 3 - Starting a Case Statement</h4>

<p>We think we&#8217;re getting the instruction from the user, but we need to actually do something with it.  We&#8217;ll use what&#8217;s called a <em>case statement</em>.  Case statements in Ruby look like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">case</span> <span class="n">input</span>
</span><span class='line'>    <span class="k">when</span> <span class="s2">&quot;a&quot;</span> <span class="k">then</span> <span class="nb">puts</span> <span class="s2">&quot;It&#39;s an A!&quot;</span>
</span><span class='line'>    <span class="k">when</span> <span class="s2">&quot;b&quot;</span> <span class="k">then</span> <span class="nb">puts</span> <span class="s2">&quot;It&#39;s a B!&quot;</span>
</span><span class='line'>    <span class="k">when</span> <span class="s2">&quot;c&quot;</span> <span class="k">then</span> <span class="nb">puts</span> <span class="s2">&quot;It&#39;s a C!&quot;</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="nb">puts</span> <span class="s2">&quot;It&#39;s something else!&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>Ruby will look at the variable <code>input</code> and see what value it holds.  If the value matches one of the <code>when</code> lines, then it&#8217;ll do the instruction(s) that follow that line&#8217;s <code>then</code>.  If it doesn&#8217;t match and of the <code>when</code> lines, it&#8217;ll run the <code>else</code>.</p>

<p>Start with this case statement in your method just below the <code>command = gets.chomp</code> line:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">case</span> <span class="n">command</span>
</span><span class='line'>    <span class="k">when</span> <span class="s1">&#39;q&#39;</span> <span class="k">then</span> <span class="nb">puts</span> <span class="s2">&quot;Goodbye!&quot;</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="nb">puts</span> <span class="s2">&quot;Sorry, I don&#39;t know how to </span><span class="si">#{</span><span class="n">command</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>Run your program and test some commands.</p>

<h4>Step 4 - Tweeting &amp; Parameters</h4>

<p>Let&#8217;s make this thing work for our tweet method.  Add a <code>when</code> line that is run when the <code>command</code> is <code>&quot;t&quot;</code>.  Have it call our <code>tweet</code> method.</p>

<p>Run your program and try entering <code>t This is only a test!</code>.  </p>

<p>You should see output like <code>Sorry, I don't know how to (t This is only a test!)</code>.  I wanted it to call the <code>tweet</code> method because I started the line with <code>t</code>, but then the rest of the line was my message.  Instead, it thought the whole line was the command.  We need to divide up the input between the command and the text that should be sent to that command.</p>

<p>There are a few ways we could accomplish this, but we&#8217;ll use the most straightforward method.</p>

<p>The line <code>command = gets.chomp</code> is kind of telling a lie.  It isn&#8217;t just getting the <code>command</code>, it&#8217;s getting a <code>command</code> and a message to send to that command.  Lets change this line to <code>input = gets.chomp</code> then we&#8217;ll work with <code>input</code> to pull out the command.</p>

<p>Now that we have <code>input</code> we need to split it up into pieces.  We&#8217;ll cut it up using the <code>split</code> method.  Just below the <code>input = gets.chomp</code> add a line that says <code>parts = input.split(&quot; &quot;)</code> to chop <code>input</code> into <code>parts</code>.</p>

<p>We know that the first element in the <code>parts</code> array is our command, so let&#8217;s pull it out by saying <code>command = parts[0]</code>.</p>

<p>Then what do we do with the rest of the <code>parts</code>?  They&#8217;re our message.  Our <code>tweet</code> method is expecting to be passed in a message, so we need to reassemble the message and add it to our <code>when</code> line.  In order to get the whole message I&#8217;ll grab <code>parts[1..-1]</code> which gives me all the words in the message from index 1 to the end of the array (-1).  That basically just skips the <code>command</code> that&#8217;s in <code>parts[0]</code>.  </p>

<p>But those <code>parts[1..-1]</code> are individual word strings, I need to join them into a single string.  We can use the <code>join</code> method and tell it to connect the words with a space like this: <code>parts[1..-1].join(&quot; &quot;)</code>.  Using that idea in the <code>when</code> line for <code>t</code>, here&#8217;s what my method looks like right now:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">def</span> <span class="nf">run</span>
</span><span class='line'>    <span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>    <span class="k">while</span> <span class="n">command</span> <span class="o">!=</span> <span class="s2">&quot;q&quot;</span>
</span><span class='line'>      <span class="nb">puts</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>      <span class="nb">printf</span> <span class="s2">&quot;enter command: &quot;</span>
</span><span class='line'>      <span class="n">input</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>
</span><span class='line'>      <span class="n">parts</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="n">split</span>
</span><span class='line'>      <span class="n">command</span> <span class="o">=</span> <span class="n">parts</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
</span><span class='line'>      <span class="k">case</span> <span class="n">command</span>
</span><span class='line'>         <span class="k">when</span> <span class="s1">&#39;q&#39;</span> <span class="k">then</span> <span class="nb">puts</span> <span class="s2">&quot;Goodbye!&quot;</span>
</span><span class='line'>         <span class="k">when</span> <span class="s1">&#39;t&#39;</span> <span class="k">then</span> <span class="n">tweet</span> <span class="c1">#tweet(parts[1..-1].join(&quot; &quot;))</span>
</span><span class='line'>         <span class="k">else</span>
</span><span class='line'>           <span class="nb">puts</span> <span class="s2">&quot;Sorry, I don&#39;t know how to (</span><span class="si">#{</span><span class="n">command</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span class='line'>       <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>Try it out and you should finally be able to post tweets over and over!</p>

<h2>Iteration 3: Send Direct Messages</h2>

<p>Sending Direct Messages isn&#8217;t that different from posting a tweet.  In fact, we can reuse our existing <code>tweet</code> method to do all the hard work.</p>

<h4>Step 0 - Frameworks</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">dm</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Trying to send </span><span class="si">#{</span><span class="n">target</span><span class="si">}</span><span class="s2"> this direct message:&quot;</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="n">message</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>And we need to add the command to our <code>run</code> method.  We&#8217;ll enter the instruction like <code>dm jumpstartlab Here is the text of the DM</code>, so our <code>when</code> line should look like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">when</span> <span class="s1">&#39;dm&#39;</span> <span class="k">then</span> <span class="n">dm</span><span class="p">(</span><span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">,</span> <span class="n">parts</span><span class="o">[</span><span class="mi">2</span><span class="o">.</span><span class="n">.</span><span class="o">-</span><span class="mi">1</span><span class="o">].</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>

<p>Remember that <code>parts[0]</code> is the command itself, here <code>dm</code>.  Then <code>parts[1]</code> will be the target username, here <code>jumpstartlab</code>.  Then everything else is the message, so we join them with spaces <code>parts[2..-1].join(&quot; &quot;)</code>.</p>

<h4>Step 1 - Create and Send the Message</h4>

<p>First, inside your <code>dm</code> method, create a new string that is a combination of &quot;d&quot;, a space, the target username, a space, then the message.  </p>

<p>Then call the <code>tweet</code> method with this new string as the parameter message.  </p>

<p>Try sending a DM to your personal Twitter account.  Try sending yourself a DM.  If the DM doesn&#8217;t show up it is probably because you can only send DMs to people who are following you.  Start following your <code>your_testing_account_username</code> account from your personal account and try it again.</p>

<h4>Step 2 - Error Checking DM-ability</h4>

<p>You can only DM people who are following you.  As you saw in Step 1, if you try and DM someone else, though, it doesn&#8217;t give you an error message.  It just fails silently.</p>

<p>Let&#8217;s add a way to verify that the target is following you before sending the message.  In pseudo-code, it&#8217;d go something like this:</p>

<ul>
<li>Find the list of my followers</li>
<li>If the target is in this list, send the DM</li>
<li>Otherwise, print an error message</li>
</ul>

<p>We can call <code>@client.followers.users</code> which gives us back a list of all our followers but includes lots of information we don&#8217;t need right now like their follower count, web address, last tweet.  All we want is to find their <code>screen_name</code>.  When you call @client.followers.users` you get an array where each element in the array is a hash.  Each hash is for one user and has several keys:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="s2">&quot;profile_background_tile&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;profile_sidebar_fill_color&quot;</span><span class="p">,</span> <span class="s2">&quot;profile_sidebar_border_color&quot;</span><span class="p">,</span> <span class="s2">&quot;created_at&quot;</span><span class="p">,</span> <span class="s2">&quot;profile_image_url&quot;</span><span class="p">,</span> <span class="s2">&quot;location&quot;</span><span class="p">,</span> <span class="s2">&quot;profile_link_color&quot;</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="s2">&quot;favourites_count&quot;</span><span class="p">,</span> <span class="s2">&quot;utc_offset&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;profile_text_color&quot;</span><span class="p">,</span> <span class="s2">&quot;followers_count&quot;</span><span class="p">,</span> <span class="s2">&quot;protected&quot;</span><span class="p">,</span> <span class="s2">&quot;notifications&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;verified&quot;</span><span class="p">,</span> <span class="s2">&quot;profile_background_color&quot;</span><span class="p">,</span> <span class="s2">&quot;time_zone&quot;</span><span class="p">,</span> <span class="s2">&quot;profile_background_image_url&quot;</span><span class="p">,</span> <span class="s2">&quot;friends_count&quot;</span><span class="p">,</span> <span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;statuses_count&quot;</span><span class="p">,</span> <span class="s2">&quot;following&quot;</span><span class="p">,</span> <span class="s2">&quot;screen_name&quot;</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>

<p>What we need to do is pull out just the <code>screen_name</code>.  We create an array of the followers&#8217; screen names with this line of code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">screen_names</span> <span class="o">=</span> <span class="vi">@client</span><span class="o">.</span><span class="n">followers</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">collect</span><span class="p">{</span><span class="o">|</span><span class="n">follower</span><span class="o">|</span> <span class="n">follower</span><span class="o">.</span><span class="n">screen_name</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

<p>To read this line out loud it would be like &quot;Call the <code>followers</code> method of <code>@client</code>, then take that array and, for each element in the array, <code>collect</code> together the value of <code>screen_name</code>.</p>

<p>Now you have an array of your followers&#8217; screen names.  Create a conditional block that follows this logic:</p>

<ul>
<li>If the <code>target</code> username is in the <code>screen_names</code> list (use the <code>.include?</code> method), then send the DM</li>
<li>Otherwise, print out an error saying that you can only DM people who follow you</li>
</ul>

<p>Test your code by sending a DM to someone who does follow your demo account and someone who does not.</p>

<h4>Step 3 - Spamming Your Friends</h4>

<p>It would be cool to be able to send the same message out to all of our followers.  We&#8217;ll accomplish this in two parts:</p>

<ul>
<li>Create a method named <code>followers_list</code> that returns an array containing the usernames of all my followers</li>
<li>Create a method name <code>spam_my_friends</code> that finds all followers from <code>followers_list</code> and tries to send them a Direct Message using the <code>dm</code> method</li>
</ul>

<p>To create the <code>followers_list</code> method&#8230;</p>

<ul>
<li>Define the method named <code>followers_list</code> with no parameters</li>
<li>Create a blank array named <code>screen_names</code></li>
<li>On the <code>@client</code> call the <code>followers</code> method then the <code>users</code> methodsand iterate through <code>each</code> of them performing the instruction below:</li>
</ul>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="n">screen_names</span> <span class="o">&lt;&lt;</span> <span class="n">follower</span><span class="o">[</span><span class="s2">&quot;screen_name&quot;</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>

<ul>
<li>Return the array <code>screen_names</code></li>
</ul>

<p>Then for the <code>spam_my_followers</code> method&#8230;</p>

<ul>
<li>Define the method named <code>spam_my_followers</code> with a parameter named <code>message</code></li>
<li>Get the list of your followers from the <code>followers_list</code> method</li>
<li>Iterate through <code>each</code> of those followers and use your <code>dm</code> method to send them the <code>message</code></li>
</ul>

<p>Then create a <code>when</code> line in your <code>run</code> method for the command <code>spam</code>.  It will look just like the <code>tweet</code> line, except it&#8217;ll send the message into the <code>spam_my_friends</code> method.</p>

<p>Test it out and see how many followers you can annoy at once!</p>

<h2>Iteration 3: Last Tweet from All Friends</h2>

<p>So now you can post tweets and DMs.  There are hundreds of clients that can do that.  If you&#8217;re a normal twitter user you follow some people who post several times per day and some people who post once per week.  It can be difficult to see everyone.  Lets create a list of the last tweet for each person you follow.</p>

<h4>Step 0 - Framework</h4>

<p>Here it is in pseudocode:
* Find the list of people you follow
* For <code>each</code> member of the list&#8230;
** Find their latest tweet
** Print out their <code>screen_name</code> and latest tweet</p>

<p>Turn that into code like this&#8230;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">def</span> <span class="nf">everyones_last_tweet</span>
</span><span class='line'>    <span class="n">friends</span> <span class="o">=</span> <span class="vi">@client</span><span class="o">.</span><span class="n">friends</span><span class="o">.</span><span class="n">users</span>
</span><span class='line'>    <span class="n">friends</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">friend</span><span class="o">|</span>
</span><span class='line'>      <span class="c1"># find each friends last message</span>
</span><span class='line'>      <span class="c1"># print each friend&#39;s screen_name</span>
</span><span class='line'>      <span class="c1"># print each friend&#39;s last message</span>
</span><span class='line'>      <span class="nb">puts</span> <span class="s2">&quot;&quot;</span>  <span class="c1"># Just print a blank line to separate people</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>Add a <code>when</code> line to your <code>run</code> method for this instruction.  I&#8217;m using the instruction <code>elt</code> so my <code>when</code> line is just <code>when 'elt' then everyones_last_tweet</code>.  Once added, restart your program and try it out.</p>

<h4>Step 1: Finding the Last Messages</h4>

<p>When you call the <code>friends</code> method you get an array list where each element of the array is itself a hash.  The hash has all the information about an individual friend such as <code>:screen_name</code>, <code>:id</code>, <code>:follower_count</code>, etc.  Here are the useful names (or <code>keys</code>) that it has:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="s2">&quot;created_at&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;favourites_count&quot;</span><span class="p">,</span> <span class="s2">&quot;followers_count&quot;</span><span class="p">,</span> <span class="s2">&quot;following&quot;</span><span class="p">,</span> <span class="s2">&quot;friends_count&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;location&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;notifications&quot;</span><span class="p">,</span> <span class="s2">&quot;profile_image_url&quot;</span><span class="p">,</span> <span class="s2">&quot;protected&quot;</span><span class="p">,</span> <span class="s2">&quot;screen_name&quot;</span><span class="p">,</span> <span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="s2">&quot;statuses_count&quot;</span><span class="p">,</span> <span class="s2">&quot;time_zone&quot;</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>

<p>So for each of those <code>friend</code> objects, if you call <code>friend.followers_count</code> you&#8217;ll get their number of followers.  Or use <code>friend.id</code> to get their unique Twitter ID number.</p>

<p><code>status</code> contains their last tweet, but there&#8217;s a catch &#8211; <code>status</code> is ANOTHER hash.  The <code>status</code> hash has these keys:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">[</span><span class="s2">&quot;created_at&quot;</span><span class="p">,</span> <span class="s2">&quot;favorited&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;in_reply_to_screen_name&quot;</span><span class="p">,</span> <span class="s2">&quot;in_reply_to_status_id&quot;</span><span class="p">,</span> <span class="s2">&quot;in_reply_to_user_id&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="s2">&quot;truncated&quot;</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>

<p>So if you want to access one of these pieces of data you&#8217;d call it like this: <code>friend.status.created_at</code> or <code>friend.status.source</code>.</p>

<p>Now that you understand the hashes available to you, implement code for the three commented lines in our <code>everyones_last_tweet</code> method.  RUN your program and you should see output kinda like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">JSTwitter</span> <span class="no">Initialized</span>
</span><span class='line'><span class="n">rsturim</span> <span class="n">said</span><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'><span class="n">the</span> <span class="n">raw</span> <span class="n">bar</span> <span class="n">is</span> <span class="nb">open</span>
</span><span class='line'>
</span><span class='line'><span class="n">amyhoy</span> <span class="n">said</span><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'><span class="n">along</span> <span class="n">with</span> <span class="n">our</span> <span class="n">candlelit</span> <span class="n">dinner</span> <span class="k">in</span> <span class="n">the</span> <span class="n">garden</span><span class="p">,</span> <span class="n">charming</span> <span class="n">brass</span> <span class="n">music</span> <span class="n">drifted</span> <span class="n">over</span> <span class="n">the</span> <span class="n">hills</span> <span class="n">from</span> <span class="n">nearby</span><span class="o">.</span> <span class="n">as</span> <span class="k">if</span> <span class="n">it</span> <span class="n">were</span> <span class="n">just</span> <span class="k">for</span> <span class="n">us</span><span class="o">.</span>
</span><span class='line'>
</span><span class='line'><span class="n">wonderwillow</span> <span class="n">said</span><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'><span class="sb">`ChrisMacDen fab idea. Do you know of good resources?</span>
</span></code></pre></td></tr></table></div></figure>

<h4>Step 2: Improving the Output</h4>

<p>Getting each friend&#8217;s last message was cool, but they&#8217;re in some random order.  Sort them by the <code>screen_name</code> in alphabetical order!  I want you to hack out the code, but the way I did it would read like this: </p>

<p>&quot;take the friends list and use the <code>sort_by</code> method, then call each one <code>friend</code> and find the <code>friend.screen_name</code>&quot;.  You might look at how you used <code>sort_by</code> in JSAttend for syntax clues.  (NOTE: Ruby considers all capital letters to come earlier in alphabetical order than lowercase letters.  To keep all your letters together regardless of capitalization, change <code>friend.screen_name</code> to <code>friend.screen_name.downcase</code> when sorting)</p>

<p>Second, these messages are lacking any time context.  The <code>status</code> hash has a key named <code>created_at</code> which holds a string like this one: <code>Thu Jul 23 23:31:16 +0000 2009</code>.  That&#8217;s the information we need, but it&#8217;s in an ugly format.  Use these steps to make the data more useable:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">timestamp</span> <span class="o">=</span> <span class="n">friend</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">created_at</span>
</span><span class='line'><span class="n">tweet_date</span> <span class="o">=</span> <span class="no">Date</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">#Then, when you want to print the date, it can be formatted like this:</span>
</span><span class='line'><span class="n">tweet_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%A, %b %d&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

<p><code>strftime</code> is my most hated method in Ruby because every time I use it I need to lookup the dumb parameters.  The <code>&quot;%A, %b %d&quot;</code> that I gave you will cause it to output the date formatted like <code>Wednesday, Jul 29</code>.  Implement the sorting and the timestamping to create output that looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">JSTwitter</span> <span class="no">Initialized</span>
</span><span class='line'><span class="n">abailin</span> <span class="n">said</span> <span class="n">this</span> <span class="n">on</span> <span class="no">Wednesday</span><span class="p">,</span> <span class="no">Jul</span> <span class="mi">29</span><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'><span class="no">RT</span> <span class="sb">`JackiMieler: `</span><span class="n">abailin</span> <span class="no">Amen</span><span class="o">!</span> <span class="no">Be</span> <span class="n">sure</span> <span class="n">to</span> <span class="n">spread</span> <span class="n">the</span> <span class="n">word</span> <span class="n">about</span> <span class="n">the</span> <span class="n">facts</span> <span class="n">of</span> <span class="n">this</span> <span class="n">story</span> <span class="o">-</span> <span class="n">http</span><span class="ss">:/</span><span class="o">/</span><span class="n">tinyurl</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">mt3gfx</span> <span class="o">-</span> <span class="n">vs</span><span class="o">.</span> <span class="n">the</span> <span class="n">fictitous</span>
</span><span class='line'>
</span><span class='line'><span class="no">AlexSenn</span> <span class="n">said</span> <span class="n">this</span> <span class="n">on</span> <span class="no">Tuesday</span><span class="p">,</span> <span class="no">Jan</span> <span class="mi">13</span><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'><span class="no">Is</span> <span class="n">looking</span> <span class="k">for</span> <span class="n">a</span> <span class="n">cute</span> <span class="n">condo</span> <span class="k">in</span> <span class="no">Atlanta</span><span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="mi">2</span> <span class="n">bedroom</span><span class="p">,</span> <span class="mi">2</span> <span class="n">bathroom</span><span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="n">any</span> <span class="n">suggestions</span><span class="p">,</span> <span class="n">let</span> <span class="n">me</span> <span class="n">know!</span>
</span><span class='line'>
</span><span class='line'><span class="n">americasvoice</span> <span class="n">said</span> <span class="n">this</span> <span class="n">on</span> <span class="no">Wednesday</span><span class="p">,</span> <span class="no">Jul</span> <span class="mi">29</span><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'><span class="no">Frank</span> <span class="no">Sharry</span> <span class="n">on</span> <span class="no">Huffington</span> <span class="no">Post</span><span class="p">:</span> <span class="no">GOP</span> <span class="no">Latino</span> <span class="no">Outreach</span> <span class="no">Strategy</span><span class="p">:</span> <span class="no">Oppose</span><span class="p">,</span> <span class="no">Ignore</span><span class="p">,</span> <span class="no">Aggravate</span> <span class="ow">and</span> <span class="no">Scapegoat</span> <span class="o">-</span> <span class="n">http</span><span class="ss">:/</span><span class="o">/</span><span class="n">bit</span><span class="o">.</span><span class="n">ly</span><span class="o">/</span><span class="mi">1</span><span class="n">jbpxo</span> <span class="c1">#topptog #tcot</span>
</span><span class='line'>
</span><span class='line'><span class="n">amyhoy</span> <span class="n">said</span> <span class="n">this</span> <span class="n">on</span> <span class="no">Wednesday</span><span class="p">,</span> <span class="no">Jul</span> <span class="mi">29</span><span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'><span class="n">along</span> <span class="n">with</span> <span class="n">our</span> <span class="n">candlelit</span> <span class="n">dinner</span> <span class="k">in</span> <span class="n">the</span> <span class="n">garden</span><span class="p">,</span> <span class="n">charming</span> <span class="n">brass</span> <span class="n">music</span> <span class="n">drifted</span> <span class="n">over</span> <span class="n">the</span> <span class="n">hills</span> <span class="n">from</span> <span class="n">nearby</span><span class="o">.</span> <span class="n">as</span> <span class="k">if</span> <span class="n">it</span> <span class="n">were</span> <span class="n">just</span> <span class="k">for</span> <span class="n">us</span><span class="o">.</span>
</span></code></pre></td></tr></table></div></figure>

<h2>Iteration 4: Shorten URLs with ShortURL</h2>

<p>There&#8217;s a great library which can be used to automatically create shortened URLs.  Let&#8217;s add this functionality into our project.</p>

<h4>Step 0 - Testing the Library</h4>

<p>First, go into Terminal and run this line:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">sudo</span> <span class="n">gem</span> <span class="n">install</span> <span class="n">shorturl</span>
</span></code></pre></td></tr></table></div></figure>

<p>Next, open <code>irb</code> and try out the following:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;rubygems&#39;</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;shorturl&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="nb">puts</span> <span class="no">ShortURL</span><span class="o">.</span><span class="n">shorten</span><span class="p">(</span><span class="s1">&#39;http://jumpstartlab.com/courses/ruby/&#39;</span><span class="p">,</span> <span class="ss">:vurl</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

<p>It might take a few seconds, but you should now have a shortened URL from RubyURL.com.  Try it out in your browser to make sure it works.</p>

<h4>Step 1 - Framework</h4>

<p>Create this method:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">shorten</span><span class="p">(</span><span class="n">original_url</span><span class="p">)</span>
</span><span class='line'>  <span class="c1"># Shortening Code</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Shortening this URL: </span><span class="si">#{</span><span class="n">original_url</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>

<p>Add a <code>when</code> line to your <code>run</code> method so that the command <code>s</code> will take one parameter and send it into the <code>shorten</code> method.</p>

<h4>Step 2 - Implement the Method</h4>

<p>Look at the model for ShortURL that we used in Step 0 and use it to fill in the shortening code of your <code>shorten</code> method.  Make sure that your method ends with a <code>return</code> statement so it send the shortened URL that called it.</p>

<h4>Step 3 - Tweet with URL</h4>

<p>How can we shorten a url while posting a tweet?  There are a few ways to do it.  Here&#8217;s an easy one:</p>

<p>Add a <code>when</code> line in your <code>run</code> method for the command <code>turl</code> which stands for &quot;Tweet with URL&quot;.  Make it accept commands that look like this:</p>

<p><code>turl I wrote this twitter client at: http://jumpstartlab.com</code></p>

<p>You know that <code>parts[0]</code> is the command, <code>parts[1..-2]</code> are the message, and <code>parts[-1]</code> is the URL to be shortened.  You can put that all together like this:</p>

<p><code>tweet(parts[1..-2].join(&quot; &quot;) + &quot; &quot; + shorten(parts[-1]))</code></p>

<p>Get that working and you&#8217;re done with the twitter client!</p>

  
    <footer>
      
      
        <div class="sharing">
  
  
</div>

      
    </footer>
  
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">
    <img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" />
  </a>
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  


  

  

  

  <div class="slide-out-div">
  <a class="handle" href="#">Feedback</a>
  <h3>Have Feedback?</h3>
  <p>Did you find an error? Something confusing? We'd love your help:</p>
  <ul>
    <li><a href="#" id="edit_source">Edit the source code of this page directly on Github</a></li>
    <li><a href="https://github.com/JumpstartLab/curriculum/issues">Create a new issue on the project's Github page</a></li>
  </ul>
  <p>Thanks!</p>
</div>

<script>
  var pathname = window.location.pathname.replace( ".html", ".markdown" );
  var github_url = "https://github.com/JumpstartLab/curriculum/blob/master/source" + pathname;
  $("a#edit_source").attr('href', github_url);
</script>

</body>
</html>
